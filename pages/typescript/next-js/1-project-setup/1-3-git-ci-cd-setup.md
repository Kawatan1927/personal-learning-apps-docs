# 1.3 GitとCI/CDの設定

このセクションでは、Gitを用いたバージョン管理と、CI/CD（継続的インテグレーション/継続的デリバリー）パイプラインの設定について詳しく解説します。これにより、コードの変更履歴をしっかり管理し、開発から本番環境へのデプロイを自動化することで、効率的かつ安全な開発フローを確立できます。

---

## 1.3.1 Gitリポジトリの初期化と基本的なブランチ戦略

### 説明
Gitは、コードのバージョン管理を行うための強力なツールです。プロジェクト開始時にGitリポジトリを初期化し、ブランチ戦略を採用することで、変更の追跡、バグ修正、機能追加などを体系的に管理できます。

### 手順

1. **Gitのインストール確認**
    - ターミナルで以下のコマンドを実行し、Gitがインストールされているか確認します。
      ```bash
      git --version
      ```
    - **Tip:** Gitが未インストールの場合は、[Git公式サイト](https://git-scm.com/)からインストーラをダウンロードしてください。

2. **プロジェクトの初期化**
    - プロジェクトディレクトリ内で以下のコマンドを実行して、Gitリポジトリを初期化します。
      ```bash
      git init
      ```
    - **Tip:** 初期化後、`.git` フォルダが作成されていることを確認してください。

3. **.gitignoreの設定**
    - プロジェクトルートに `.gitignore` ファイルを作成し、以下のような不要なファイルやディレクトリを除外します。
      ```gitignore
      node_modules/
      .next/
      dist/
      .env.local
      ```
    - **Tip:** [gitignore.io](https://www.toptal.com/developers/gitignore) を利用すると、プロジェクトに適した.gitignoreファイルを自動生成できます。

4. **初回コミットの実施**
    - 全ファイルをステージし、初回コミットを行います。
      ```bash
      git add .
      git commit -m "Initial commit"
      ```
    - **Tip:** コミットメッセージは、変更内容がわかりやすいように具体的に記述する習慣を身につけましょう。

5. **ブランチ戦略の策定**
    - 開発を進めるにあたって、`main`（または`master`）ブランチを本番リリース用として、機能追加やバグ修正は別のブランチ（例: `feature/xxx` や `bugfix/xxx`）で行う戦略を採用します。
    - **Tip:** Gitフロー（Git Flow）やGitHubフローといったブランチ戦略のモデルを参考にすると、効果的な運用が可能です。

---

## 1.3.2 リモートリポジトリ（GitHubなど）への接続

### 説明
ローカルリポジトリでの変更を共有・バックアップするために、GitHubやGitLabなどのリモートリポジトリにコードをプッシュします。これにより、チーム内での共同作業や、CI/CDツールとの連携が容易になります。

### 手順

1. **リモートリポジトリの作成**
    - GitHubやGitLabなどのサービスにログインし、新しいリポジトリを作成します。
    - **Tip:** リポジトリ作成時に、README.mdやLICENSEファイルを同時に生成すると、プロジェクトの概要や利用規約を早期に共有できます。

2. **リモートリポジトリの追加**
    - ローカルリポジトリにリモートリポジトリのURLを追加します。
      ```bash
      git remote add origin https://github.com/yourusername/your-repo-name.git
      ```
    - **Tip:** URLはHTTPSやSSHのどちらかで設定できます。SSHキーを設定すると、認証がよりシームレスになります。

3. **初回プッシュの実施**
    - `main`ブランチをリモートにプッシュします。
      ```bash
      git push -u origin main
      ```
    - **Tip:** `-u` オプションを使用すると、今後のプッシュ/プル操作でブランチを明示的に指定する必要がなくなります。

---

## 1.3.3 VercelやNetlifyを利用した初回デプロイの設定

### 説明
CI/CDパイプラインの導入により、コード変更のたびに自動でビルドとデプロイが行われ、迅速にフィードバックを得ることができます。Next.jsプロジェクトでは、VercelやNetlifyなどのホスティングサービスを利用するのが一般的です。

### 手順

1. **ホスティングサービスのアカウント作成**
    - Vercel（[vercel.com](https://vercel.com/)）またはNetlify（[netlify.com](https://www.netlify.com/)）にサインアップし、アカウントを作成します。
    - **Tip:** VercelはNext.jsと高い親和性があるため、初めての方には特におすすめです。

2. **リポジトリとの連携**
    - ホスティングサービスのダッシュボードから「New Project」または「Import Project」オプションを選び、GitHubリポジトリと連携します。
    - **Tip:** 連携する際、プロジェクトに関する環境変数（APIキーやシークレット情報など）も設定できるので、事前に整理しておくとスムーズです。

3. **ビルドとデプロイ設定の確認**
    - Vercelの場合、デフォルトでNext.jsの設定が適用されますが、必要に応じてビルドコマンド（例: `npm run build`）や出力ディレクトリ（通常は`.next`）の設定を確認します。
    - **Tip:** デプロイログを確認して、エラーや警告がないかチェックしましょう。

4. **自動デプロイのテスト**
    - ローカルリポジトリでの変更をリモートにプッシュすると、自動的にビルドとデプロイが開始されます。デプロイ完了後、生成されたURLにアクセスして、サイトが正しく表示されるか確認します。
    - **Tip:** 初回デプロイ後は、ホスティングサービスのダッシュボードからデプロイの履歴やステータスをチェックし、CI/CDパイプラインが正常に動作しているか確認してください。

---

# まとめ

この「1.3 GitとCI/CDの設定」セクションでは、以下の点を詳しく解説しました：

- **Gitリポジトリの初期化とブランチ戦略:**  
  Gitの初期化、.gitignoreの設定、初回コミット、そして効果的なブランチ運用のポイントを解説しました。

- **リモートリポジトリへの接続:**  
  GitHubなどのリモートリポジトリとの連携方法、初回プッシュの手順、及び効果的な運用のTipsを紹介しました。

- **VercelやNetlifyを利用したCI/CDの設定:**  
  ホスティングサービスとの連携、自動デプロイの設定方法、及び環境変数やビルド設定のポイントを解説しました。

これらの設定により、コードの変更管理と自動デプロイが実現し、開発から本番リリースまでのプロセスが大幅に効率化されます。次のステップでは、基本的なページ作成やルーティングの実装に進んでいきます。